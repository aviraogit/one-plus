(window.webpackJsonp=window.webpackJsonp||[]).push([["product2077/appAddress"],{"7w1C":function(e,t,i){"use strict";i.r(t);i("fp7Y"),i("aZFp"),i("SgDD");var s=i("Pyhl"),r=i("czhI");r.defaults.withCredentials=!0;var o=i("fu9z"),n=i("C6ek"),a=document.querySelector("#mall-api-url")?document.querySelector("#mall-api-url").value:"https://mallapi.oneplus.in/v2/api/router",d={components:{"one-dialog":i("o1eB").default},data:function(){return{addressInfo:"",address:"",pinCode:"",deliverable:"",errorMsgTip:"",storeCode:"",isXman:window.isXman,isInStoreAppEnv:n.isInStoreAppEnv&&n.storeAppGetAppVersionCode()>=(window.inStoreAppPincodeVersions||8)}},mounted:function(){this.storeCode=o.site.store,"in"===this.storeCode&&(this.initPinCode(),window.accAddressInfoByStoreApp=this.accAddressInfoByStoreApp)},methods:{initPinCode:function(){if(this.isInStoreAppEnv){var e=n.storeAppGetAddressinfo();this.tearCharacter(e),this.checkPincode()}},tearCharacter:function(e){this.addressInfo=e||"",this.address=this.addressInfo.split(",")[0],this.pinCode=this.addressInfo.split(",")[1]&&this.addressInfo.split(",")[1].trim()},checkPincode:function(){this.pinCode&&this.getIsDeliverable()},getIsDeliverable:function(){var e=this;if(window.isXman){var t={pincode:this.pinCode},i=document.getElementById("api-pincheck")&&document.getElementById("api-pincheck").value||"xman/useraddress/pincheck";r({methods:"GET",url:o.methods.apiDomainFactory(i),params:t}).then((function(t){var i=t.data,s=i.ret,r=i.errMsg,o=i.data,n=i.errCode;e.deliverable="",1===Number(s)?e.deliverable=o.deliverable:e.interfaceError(n,r)}))}else{var s={method:"mall.trade.useraddress.postcode.fetch",biz_content:{postcode:this.pinCode,storeViewCode:o.site.store}};r({methods:"POST",url:o.methods.apiDomainFactory(a),params:s}).then((function(t){var i=t.data,s=i.ret,r=i.errMsg,o=i.data,n=i.errCode;e.deliverable="",1===Number(s)?e.deliverable=o.deliverable:e.interfaceError(n,r)}))}},clickHanderSelectAddress:function(){n.isInStoreAppEnv&&n.storeAppShowAddressDialog()},accAddressInfoByStoreApp:function(e){o.bus.$emit("trade-in-address-info",e),this.tearCharacter(e),this.checkPincode(),Object(s.r)()},onClickShowErrorTips:function(e){this.errorMsgTip=e,this.$refs.errorDialog.show()},interfaceError:function(e,t){var i=this,s={250:function(){i.deliverable=0},240:function(){i.onClickShowErrorTips(t)},default:function(){i.onClickShowErrorTips(i.$t("pincode.errTips"))}};(s[e]||s.default).call(this)}}},c=(i("8sXd"),i("psIG")),l=Object(c.a)(d,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isInStoreAppEnv&&"in"===e.storeCode?i("div",{staticClass:"app-pincode"},[i("div",{staticClass:"address-info"},[i("i",{staticClass:"ico-location_v2 location-icon"}),e._v(" "),i("div",{staticClass:"device-msg font-descriptions"},[e.addressInfo?i("a",{staticClass:"text-blue",attrs:{"app-track-data":"FB_Select_delivery_location"},on:{click:e.clickHanderSelectAddress}},[i("span",[e._v(e._s(e.$t("pincode.delive"))+" "+e._s(e.address)+" -")]),e._v(" "+e._s(e.pinCode))]):i("a",{staticClass:"text-blue",attrs:{"app-track-data":"FB_Select_delivery_location"},on:{click:e.clickHanderSelectAddress}},[e._v(" "+e._s(e.$t("pincode.select-delive")))])])]),e._v(" "),0===e.deliverable?i("p",{staticClass:"is-deliverable font-descriptions text-red"},[e._v("\n    "+e._s(e.$t("pincode.unreachable"))+"\n  ")]):e._e(),e._v(" "),i("one-dialog",{ref:"errorDialog",staticClass:"error-dialog"},[i("div",{staticClass:"content"},[i("p",{staticClass:"text"},[e._v("\n        "+e._s(e.errorMsgTip)+"\n      ")])])])],1):e._e()}),[],!1,null,"6c6f12df",null);t.default=l.exports},"8sXd":function(e,t,i){"use strict";var s=i("Bb3P");i.n(s).a},Bb3P:function(e,t,i){}}]);